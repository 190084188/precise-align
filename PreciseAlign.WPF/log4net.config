<?xml version="1.0" encoding="utf-8" ?>
<log4net>
	<!-- ================================================================== -->
	<!--               文件日志追加器 (File Appender)                     -->
	<!-- ================================================================== -->
	<appender name="FileAppender" type="log4net.Appender.RollingFileAppender">
		<!-- 基础文件名，不带日期和.log后缀 -->
		<file value="Logs/PreciseAlign" />
		<appendToFile value="true" />

		<!-- 设置为按日期滚动日志 -->
		<rollingStyle value="Date" />

		<!-- 
      日志文件名后缀格式，每天一个新文件。
      例如: Logs/PreciseAlign.log.2025-10-20 
    -->
		<datePattern value=".log.yyyy-MM-dd" />

		<!-- 最多保留30个滚动日志文件（即30天） -->
		<maxSizeRollBackups value="30" />

		<!-- 
      staticLogFileName 设为 false 意味着当前最新的日志文件也会带有日期后缀。
      这可以避免在午夜滚动时重命名文件可能引发的问题。
    -->
		<staticLogFileName value="false" />

		<!-- 日志内容的布局格式 -->
		<layout type="log4net.Layout.PatternLayout">
			<conversionPattern value="%date{yyyy-MM-dd HH:mm:ss,fff} [%thread] %-5level %logger - %message%newline" />
		</layout>
	</appender>

	<!-- ================================================================== -->
	<!--              自定义UI界面追加器 (Custom UI Appender)               -->
	<!-- ================================================================== -->
	<appender name="UiAppender" type="PreciseAlign.WPF.Services.ObservableCollectionAppender, PreciseAlign.WPF">
		<layout type="log4net.Layout.PatternLayout">
			<!-- UI上只显示简洁的消息，时间戳和级别由数据模型处理 -->
			<conversionPattern value="%message" />
		</layout>
	</appender>

	<!-- ================================================================== -->
	<!--                      根记录器配置 (Root Logger)                    -->
	<!-- ================================================================== -->
	<root>
		<!-- 设置全局记录的最低级别为 INFO。DEBUG 级别的日志将被忽略。 -->
		<level value="INFO" />

		<!-- 启用上面定义的两个追加器 -->
		<appender-ref ref="FileAppender" />
		<appender-ref ref="UiAppender" />
	</root>
</log4net>

